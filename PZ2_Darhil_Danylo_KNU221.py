import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns


from pycaret.datasets import get_data
Data = get_data('nba')
st.markdown("""# –ü–ó ‚Ññ 2. –î–∞—Ä–≥—ñ–ª—å –î–∞–Ω–∏–ª–æ –û–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á. –ö–ù–¢—É-22-1. –í–∞—Ä—ñ–∞–Ω—Ç ‚Ññ1.""")
st.markdown("""## –î–∞—Ç–∞—Å–µ—Ç NBA:""")
st.write(Data.describe())

st.markdown("""### **–û–ø–∏—Å –¥–∞—Ç–∞—Å–µ—Ç—É NBA**  

–î–∞—Ç–∞—Å–µ—Ç **NBA** –º—ñ—Å—Ç–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏ –≥—Ä–∞–≤—Ü—ñ–≤ NBA —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É —ó—Ö–Ω—å–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ, –∞ —Ç–∞–∫–æ–∂ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è –º–∞–π–±—É—Ç–Ω—å–æ—ó –∫–∞—Ä'—î—Ä–∏. –û—Å–Ω–æ–≤–Ω–∞ –º–µ—Ç–∞ ‚Äì –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —á–∏ –±—É–¥–µ –≥—Ä–∞–≤–µ—Ü—å –∑–∞–ª–∏—à–∞—Ç–∏—Å—è –≤ NBA —á–µ—Ä–µ–∑ **5 —Ä–æ–∫—ñ–≤** –ø—ñ—Å–ª—è –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Å–µ–∑–æ–Ω—É.  

---

#### **–ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞—Ç–∞—Å–µ—Ç—É**
- **–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤:** 1340 (–≥—Ä–∞–≤—Ü—ñ)  
- **–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–æ–≤–ø—Ü—ñ–≤:** 21  
- **–¢–∏–ø–∏ –¥–∞–Ω–∏—Ö:**  
  - 1 —Ç–µ–∫—Å—Ç–æ–≤–∏–π (`Name` ‚Äì —ñ–º'—è –≥—Ä–∞–≤—Ü—è)  
  - 2 —Ü—ñ–ª–æ—á–∏—Å–ª–æ–≤—ñ (`GP`, `TARGET_5Yrs`)  
  - 18 —á–∏—Å–ª–æ–≤–∏—Ö (float) ‚Äì —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏ –≥—Ä–∞–≤—Ü—è  

---

### **–û–ø–∏—Å —Å—Ç–æ–≤–ø—Ü—ñ–≤**
| **–°—Ç–æ–≤–ø–µ—Ü—å**    | **–û–ø–∏—Å** |
|-----------------|----------|
| **`Name`**      | –Ü–º'—è –≥—Ä–∞–≤—Ü—è. |
| **`GP`**        | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑—ñ–≥—Ä–∞–Ω–∏—Ö –º–∞—Ç—á—ñ–≤ (Games Played). |
| **`MIN`**       | –°–µ—Ä–µ–¥–Ω—è –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ö–≤–∏–ª–∏–Ω, –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—Ö –Ω–∞ –º–∞–π–¥–∞–Ω—á–∏–∫—É –∑–∞ –≥—Ä—É (Minutes Per Game). |
| **`PTS`**       | –°–µ—Ä–µ–¥–Ω—è –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ—á–æ–∫ –∑–∞ –≥—Ä—É (Points Per Game). |
| **`FGM`**       | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–ª—É—á–µ–Ω—å –∑ –≥—Ä–∏ (Field Goals Made). |
| **`FGA`**       | –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–± –∫–∏–¥–∫—ñ–≤ –∑ –≥—Ä–∏ (Field Goals Attempted). |
| **`FG%`**       | –í—ñ–¥—Å–æ—Ç–æ–∫ –≤–ª—É—á–∞–Ω—å –∑ –≥—Ä–∏ (Field Goal Percentage). |
| **`3P Made`**   | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–ª—É—á–Ω–∏—Ö —Ç—Ä–∏–æ—á–∫–æ–≤–∏—Ö –∫–∏–¥–∫—ñ–≤ (Three-Point Field Goals Made). |
| **`3PA`**       | –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–± —Ç—Ä–∏–æ—á–∫–æ–≤–∏—Ö –∫–∏–¥–∫—ñ–≤ (Three-Point Field Goals Attempted). |
| **`3P%`**       | –í—ñ–¥—Å–æ—Ç–æ–∫ –≤–ª—É—á–∞–Ω—å —Ç—Ä–∏–æ—á–∫–æ–≤–∏—Ö –∫–∏–¥–∫—ñ–≤ (Three-Point Field Goal Percentage). |
| **`FTM`**       | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–ª—É—á–Ω–∏—Ö —à—Ç—Ä–∞—Ñ–Ω–∏—Ö –∫–∏–¥–∫—ñ–≤ (Free Throws Made). |
| **`FTA`**       | –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–± —à—Ç—Ä–∞—Ñ–Ω–∏—Ö –∫–∏–¥–∫—ñ–≤ (Free Throws Attempted). |
| **`FT%`**       | –í—ñ–¥—Å–æ—Ç–æ–∫ –≤–ª—É—á–∞–Ω—å —à—Ç—Ä–∞—Ñ–Ω–∏—Ö –∫–∏–¥–∫—ñ–≤ (Free Throw Percentage). |
| **`OREB`**      | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥–±–∏—Ä–∞–Ω—å —É –Ω–∞–ø–∞–¥—ñ (Offensive Rebounds). |
| **`DREB`**      | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥–±–∏—Ä–∞–Ω—å —É –∑–∞—Ö–∏—Å—Ç—ñ (Defensive Rebounds). |
| **`REB`**       | –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥–±–∏—Ä–∞–Ω—å (Total Rebounds). |
| **`AST`**       | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á, —â–æ –ø—Ä–∏–≤–µ–ª–∏ –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ–≥–æ –∫–∏–¥–∫–∞ (Assists). |
| **`STL`**       | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω—å –º'—è—á–∞ (Steals). |
| **`BLK`**       | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –±–ª–æ–∫—à–æ—Ç—ñ–≤ (Blocks). |
| **`TOV`**       | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—Ç—Ä–∞—Ç –º'—è—á–∞ (Turnovers). |
| **`TARGET_5Yrs`** | *–¶—ñ–ª—å–æ–≤–∞ –∑–º—ñ–Ω–Ω–∞:* - `1` ‚Äì –ì—Ä–∞–≤–µ—Ü—å –ø—Ä–æ–¥–æ–≤–∂–∏—Ç—å –≤–∏—Å—Ç—É–ø–∞—Ç–∏ –≤ NBA —á–µ—Ä–µ–∑ 5 —Ä–æ–∫—ñ–≤. - `0` ‚Äì –ì—Ä–∞–≤–µ—Ü—å –Ω–µ –±—É–¥–µ –≥—Ä–∞—Ç–∏ –≤ NBA —á–µ—Ä–µ–∑ 5 —Ä–æ–∫—ñ–≤. |

---

### **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –¥–∞—Ç–∞—Å–µ—Ç—É**
–î–∞—Ç–∞—Å–µ—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Ç–∞–∫–∏—Ö –∑–∞–¥–∞—á:
- **–ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –≥—Ä–∞–≤—Ü—ñ–≤:** –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–π–∫—Ä–∞—â–∏—Ö —Ç–∞ –Ω–∞–π–≥—ñ—Ä—à–∏—Ö –ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤.
- **–ü—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è –∫–∞—Ä'—î—Ä–Ω–æ–≥–æ —à–ª—è—Ö—É:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `TARGET_5Yrs` —è–∫ —Ü—ñ–ª—å–æ–≤–æ—ó –∑–º—ñ–Ω–Ω–æ—ó –≤ –º–æ–¥–µ–ª—ñ –º–∞—à–∏–Ω–Ω–æ–≥–æ –Ω–∞–≤—á–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è –∫–∞—Ä'—î—Ä–∏ –≥—Ä–∞–≤—Ü—ñ–≤.
- **–û—Ü—ñ–Ω–∫–∞ –≤–∞–∂–ª–∏–≤–∏—Ö —Ñ–∞–∫—Ç–æ—Ä—ñ–≤:** –í–∏—è–≤–ª–µ–Ω–Ω—è –∫–ª—é—á–æ–≤–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫, —è–∫—ñ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤—É –∫–∞—Ä'—î—Ä—É –≤ NBA.
""")

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Streamlit
st.title("üìä –ê–Ω–∞–ª—ñ–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ NBA")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 1: –ì—ñ—Å—Ç–æ–≥—Ä–∞–º–∞ —Ä–æ–∑–ø–æ–¥—ñ–ª—É –æ—á–æ–∫ (PTS) +++++
st.subheader("1. –†–æ–∑–ø–æ–¥—ñ–ª –æ—á–æ–∫ —Å–µ—Ä–µ–¥ –≥—Ä–∞–≤—Ü—ñ–≤")
fig, ax = plt.subplots()
sns.histplot(Data['PTS'], bins=20, kde=True, ax=ax)
ax.set_xlabel("–û—á–∫–∏ –∑–∞ –≥—Ä—É")
ax.set_ylabel("–ö—ñ–ª—å–∫—ñ—Å—Ç—å –≥—Ä–∞–≤—Ü—ñ–≤")
st.pyplot(fig)
st.write("–¶–µ–π –≥—Ä–∞—Ñ—ñ–∫ –ø–æ–∫–∞–∑—É—î, —è–∫ —Ä–æ–∑–ø–æ–¥—ñ–ª—è—é—Ç—å—Å—è –æ—á–∫–∏ —Å–µ—Ä–µ–¥ –≥—Ä–∞–≤—Ü—ñ–≤ NBA.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 2: –°–µ—Ä–µ–¥–Ω—ñ–π –≤—ñ–¥—Å–æ—Ç–æ–∫ –≤–ª—É—á–∞–Ω—å (FG%) –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏ ++++++
st.subheader("2. –°–µ—Ä–µ–¥–Ω—ñ–π –≤—ñ–¥—Å–æ—Ç–æ–∫ –≤–ª—É—á–∞–Ω—å –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏")
position = st.selectbox("–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é", ['GP', 'TARGET_5Yrs'])
data_grouped = Data.groupby(position)['FG%'].mean().reset_index()
fig, ax = plt.subplots(figsize=(15, 7))  # –†–æ–∑—à–∏—Ä–µ–Ω–æ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—ñ
sns.barplot(x=data_grouped[position], y=data_grouped['FG%'], ax=ax)
ax.set_xlabel(f"–ó–Ω–∞—á–µ–Ω–Ω—è {position}")
ax.set_ylabel("–°–µ—Ä–µ–¥–Ω—ñ–π –≤—ñ–¥—Å–æ—Ç–æ–∫ –≤–ª—É—á–∞–Ω—å FG%")
ax.set_xticks(ax.get_xticks()[::1])  # –°–∫–æ—Ä–æ—á–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å—ñ–≤
ax.set_xticklabels(ax.get_xticklabels(), rotation=45)
st.pyplot(fig)
st.write("–¶—è –¥—ñ–∞–≥—Ä–∞–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è —Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ –≤—ñ–¥—Å–æ—Ç–∫—É –≤–ª—É—á–∞–Ω—å (FG%) –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑—ñ–≥—Ä–∞–Ω–∏—Ö –º–∞—Ç—á—ñ–≤ –∞–±–æ —Ç–æ–≥–æ —á–∏ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç—å –≥—Ä–∞–≤–µ—Ü—å –≤–∏—Å—Ç—É–ø–∞—Ç–∏ –≤ NBA —á–µ—Ä–µ–∑ 5 —Ä–æ–∫—ñ–≤.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 3: –°–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è —Ç—Ä–∏–æ—á–∫–æ–≤–∏—Ö —Å–ø—Ä–æ–± (3PA) –¥–æ –∑–∞–≥–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∫–∏–¥–∫—ñ–≤ (FGA) +++++++
st.subheader("3. –ß–∞—Å—Ç–∫–∞ —Ç—Ä–∏–æ—á–∫–æ–≤–∏—Ö —Å–ø—Ä–æ–± —Å–µ—Ä–µ–¥ —É—Å—ñ—Ö –∫–∏–¥–∫—ñ–≤")
fig, ax = plt.subplots()
labels = ['3-–û—á–∫–æ–≤—ñ —Å–ø—Ä–æ–±–∏', '–Ü–Ω—à—ñ —Å–ø—Ä–æ–±–∏']
data_values = [Data['3PA'].sum(), Data['FGA'].sum() - Data['3PA'].sum()]
ax.pie(data_values, labels=labels, autopct='%1.1f%%')
st.pyplot(fig)
st.write("–¶—è –∫—Ä—É–≥–æ–≤–∞ –¥—ñ–∞–≥—Ä–∞–º–∞ –ø–æ–∫–∞–∑—É—î, —è–∫—É —á–∞—Å—Ç–∫—É –∑–∞–π–º–∞—é—Ç—å —Ç—Ä–∏–æ—á–∫–æ–≤—ñ —Å–ø—Ä–æ–±–∏ —Å–µ—Ä–µ–¥ —É—Å—ñ—Ö —Å–ø—Ä–æ–± –∫–∏–¥–∫—ñ–≤.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 4: –†–æ–∑–ø–æ–¥—ñ–ª –æ–±–æ—Ä–æ–Ω–Ω–∏—Ö —ñ –∞—Ç–∞–∫—É–≤–∞–ª—å–Ω–∏—Ö –ø—ñ–¥–±–∏—Ä–∞–Ω—å ++++++
st.subheader("4. –†–æ–∑–ø–æ–¥—ñ–ª –ø—ñ–¥–±–∏—Ä–∞–Ω—å")
fig, ax = plt.subplots()
sns.boxplot(data=Data[['OREB', 'DREB']], ax=ax)
ax.set_ylabel("–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥–±–∏—Ä–∞–Ω—å")
st.pyplot(fig)
st.write("–¶—è –¥—ñ–∞–≥—Ä–∞–º–∞ –ø–æ–∫–∞–∑—É—î —Ä–æ–∑–ø–æ–¥—ñ–ª –∞—Ç–∞–∫—É–≤–∞–ª—å–Ω–∏—Ö (OREB) —Ç–∞ –∑–∞—Ö–∏—Å–Ω–∏—Ö (DREB) –ø—ñ–¥–±–∏—Ä–∞–Ω—å —É –≥—Ä–∞–≤—Ü—ñ–≤ NBA.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 5: –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—Ç—Ä–∞—Ç (TOV) —É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –∑—ñ–≥—Ä–∞–Ω–∏—Ö –º–∞—Ç—á—ñ–≤ (GP) +++++++
st.subheader("5. –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—Ç—Ä–∞—Ç —É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –º–∞—Ç—á—ñ–≤")
fig, ax = plt.subplots()
sns.scatterplot(x=Data['GP'], y=Data['TOV'], ax=ax)
ax.set_xlabel("–ö—ñ–ª—å–∫—ñ—Å—Ç—å –º–∞—Ç—á—ñ–≤ (GP)")
ax.set_ylabel("–í—Ç—Ä–∞—Ç–∏ –º'—è—á–∞ (TOV)")
st.pyplot(fig)
st.write("–¶—è –¥—ñ–∞–≥—Ä–∞–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≤–∑–∞—î–º–æ–∑–≤‚Äô—è–∑–æ–∫ –º—ñ–∂ –∫—ñ–ª—å–∫—ñ—Å—Ç—é –º–∞—Ç—á—ñ–≤ —Ç–∞ –≤—Ç—Ä–∞—Ç–∞–º–∏ –º'—è—á–∞ —É –≥—Ä–∞–≤—Ü—ñ–≤.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 6: –°–µ—Ä–µ–¥–Ω—ñ –æ—á–∫–∏ —É —Ä—ñ–∑–Ω–∏—Ö –≥—Ä—É–ø–∞—Ö –≥—Ä–∞–≤—Ü—ñ–≤ ++++++
st.subheader("6. –°–µ—Ä–µ–¥–Ω—ñ –æ—á–∫–∏ —É —Ä—ñ–∑–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö")
group = st.radio("–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é", ['GP', 'TARGET_5Yrs'])
data_grouped = Data.groupby(group)['PTS'].mean().reset_index()
fig, ax = plt.subplots(figsize=(15, 7)) 
sns.barplot(x=data_grouped[group], y=data_grouped['PTS'], ax=ax)
ax.set_xlabel(f"–ó–Ω–∞—á–µ–Ω–Ω—è {group}")
ax.set_ylabel("–°–µ—Ä–µ–¥–Ω—ñ –æ—á–∫–∏")
ax.set_xticklabels(ax.get_xticklabels(), rotation=45)
st.pyplot(fig)
st.write("–¶—è –¥—ñ–∞–≥—Ä–∞–º–∞ –ø–æ–∫–∞–∑—É—î —Å–µ—Ä–µ–¥–Ω—é –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ—á–æ–∫, —è–∫—ñ –Ω–∞–±–∏—Ä–∞—é—Ç—å –≥—Ä–∞–≤—Ü—ñ –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑—ñ–≥—Ä–∞–Ω–∏—Ö –º–∞—Ç—á—ñ–≤, –∞–±–æ –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Ç–æ–≥–æ, —á–∏ –±—É–¥–µ –≥—Ä–∞–≤–µ—Ü—å –≤–∏—Å—Ç—É–ø–∞—Ç–∏ –≤ –ø—Ä–æ–¥–æ–≤–∂ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö 5 —Ä–æ–∫—ñ–≤.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 7: –í—ñ–¥–Ω–æ—à–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–∏—Ö –ø–µ—Ä–µ–¥–∞—á –¥–æ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω—å ++++++
st.subheader("7. –í—ñ–¥–Ω–æ—à–µ–Ω–Ω—è –ø–µ—Ä–µ–¥–∞—á –¥–æ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω—å")
fig, ax = plt.subplots()
sns.scatterplot(x=Data['AST'], y=Data['STL'], ax=ax)
ax.set_xlabel("–ü–µ—Ä–µ–¥–∞—á—ñ (AST)")
ax.set_ylabel("–ü–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è (STL)")
st.pyplot(fig)
st.write("–¶—è –¥—ñ–∞–≥—Ä–∞–º–∞ –ø–æ–∫–∞–∑—É—î, —è–∫ –≤–∑–∞—î–º–æ–ø–æ–≤‚Äô—è–∑–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω—ñ –ø–µ—Ä–µ–¥–∞—á—ñ —Ç–∞ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è —É –≥—Ä–∞–≤—Ü—ñ–≤.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 8: –í—ñ–¥–Ω–æ—à–µ–Ω–Ω—è —à—Ç—Ä–∞—Ñ–Ω–∏—Ö —Å–ø—Ä–æ–± (FTA) –¥–æ –≤–ª—É—á–∞–Ω—å (FTM) ++++++
st.subheader("8. –í—ñ–¥–Ω–æ—à–µ–Ω–Ω—è —à—Ç—Ä–∞—Ñ–Ω–∏—Ö —Å–ø—Ä–æ–± –¥–æ –≤–ª—É—á–∞–Ω—å")
fig, ax = plt.subplots()
labels = ['–®—Ç—Ä–∞—Ñ–Ω—ñ —Å–ø—Ä–æ–±–∏ (FTA)', '–®—Ç—Ä–∞—Ñ–Ω—ñ –≤–ª—É—á–∞–Ω–Ω—è (FTM)']
data_values = [Data['FTA'].sum(), Data['FTM'].sum()]
sns.barplot(x=labels, y=data_values, ax=ax)
ax.set_ylabel("–ö—ñ–ª—å–∫—ñ—Å—Ç—å")
st.pyplot(fig)
st.write("–¶—è –¥—ñ–∞–≥—Ä–∞–º–∞ –ø–æ—Ä—ñ–≤–Ω—é—î –∑–∞–≥–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —à—Ç—Ä–∞—Ñ–Ω–∏—Ö —Å–ø—Ä–æ–± (FTA) —ñ —à—Ç—Ä–∞—Ñ–Ω–∏—Ö –≤–ª—É—á–∞–Ω—å (FTM) –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 9: –ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å GP –∞–±–æ MIN –≤—ñ–¥ TARGET_5Yrs ++++++
st.subheader("9. –ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –º—ñ–∂ GP –∞–±–æ MIN –≤—ñ–¥ TARGET_5Yrs")
option = st.radio("–û–±–µ—Ä—ñ—Ç—å –ø–æ–∫–∞–∑–Ω–∏–∫", ['GP', 'MIN'])
data_grouped = Data.groupby('TARGET_5Yrs')[option].mean().reset_index()
fig, ax = plt.subplots(figsize=(8, 5))
sns.barplot(x=data_grouped['TARGET_5Yrs'], y=data_grouped[option], ax=ax)
ax.set_xlabel("–ß–∏ –∑–∞–ª–∏—à–∏–≤—Å—è –≥—Ä–∞–≤–µ—Ü—å –≤ NBA —á–µ—Ä–µ–∑ 5 —Ä–æ–∫—ñ–≤")
ax.set_ylabel(f"–°–µ—Ä–µ–¥–Ω—ñ–π {option}")
st.pyplot(fig)
st.write(f"–¶—è –¥—ñ–∞–≥—Ä–∞–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Å–µ—Ä–µ–¥–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—É {option} –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Ç–æ–≥–æ, —á–∏ –∑–∞–ª–∏—à–∏–≤—Å—è –≥—Ä–∞–≤–µ—Ü—å –≤ NBA —á–µ—Ä–µ–∑ 5 —Ä–æ–∫—ñ–≤.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 10: –†–æ–∑–ø–æ–¥—ñ–ª —Å–µ—Ä–µ–¥–Ω—å–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –±–ª–æ–∫—à–æ—Ç—ñ–≤ (BLK) —Ç–∞ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω—å (STL) ++++++
st.subheader("10. –†–æ–∑–ø–æ–¥—ñ–ª –±–ª–æ–∫—à–æ—Ç—ñ–≤ —Ç–∞ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω—å")
fig, ax = plt.subplots()
sns.boxplot(data=Data[['BLK', 'STL']], ax=ax)
ax.set_ylabel("–ö—ñ–ª—å–∫—ñ—Å—Ç—å")
st.pyplot(fig)
st.write("–¶—è –¥—ñ–∞–≥—Ä–∞–º–∞ –ø–æ–∫–∞–∑—É—î —Ä–æ–∑–ø–æ–¥—ñ–ª —Å–µ—Ä–µ–¥–Ω—å–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –±–ª–æ–∫—à–æ—Ç—ñ–≤ (BLK) —Ç–∞ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω—å (STL) —Å–µ—Ä–µ–¥ –≥—Ä–∞–≤—Ü—ñ–≤ NBA.")









st.title("üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –Ω–∞–≤—á–∞–Ω–Ω—è —É –≤–∏–≥–ª—è–¥—ñ –º–µ—Ç—Ä–∏–∫")

from pycaret.classification import load_model, interpret_model, pull, plot_model, predict_model

model_path = r"C:\Users\wojil\final_lr_model"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ —ñ—Å–Ω—É—î —Ñ–∞–π–ª
model = load_model(model_path)
predictions = predict_model(model, data=Data)

# st.write("üìä –û—Ü—ñ–Ω–∫–∞ –º–æ–¥–µ–ª—ñ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö:")
# st.dataframe(predictions.head())

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 1: –ú–∞—Ç—Ä–∏—Ü—è –ø–ª—É—Ç–∞–Ω–∏–Ω–∏
st.subheader("1. –ú–∞—Ç—Ä–∏—Ü—è –ø–ª—É—Ç–∞–Ω–∏–Ω–∏")
fig, ax = plt.subplots()
sns.heatmap(pd.crosstab(predictions['TARGET_5Yrs'], predictions['prediction_label']), annot=True, fmt='d', cmap='Blues', ax=ax)
ax.set_xlabel("–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è")
ax.set_ylabel("–†–µ–∞–ª—å–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è")
st.pyplot(fig)
st.write("–ú–∞—Ç—Ä–∏—Ü—è –ø–ª—É—Ç–∞–Ω–∏–Ω–∏ –ø–æ–∫–∞–∑—É—î, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –¥–æ–±—Ä–µ –º–æ–¥–µ–ª—å —Ä–æ–∑–ø—ñ–∑–Ω–∞—î –∫–ª–∞—Å–∏.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 2: –†–æ–∑–ø–æ–¥—ñ–ª –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç–µ–π –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å
st.subheader("2. –†–æ–∑–ø–æ–¥—ñ–ª –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç–µ–π –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å")
fig, ax = plt.subplots()
sns.histplot(predictions['prediction_score'], bins=20, kde=True, ax=ax)
ax.set_xlabel("–ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–≥–æ –∫–ª–∞—Å—É")
ax.set_ylabel("–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω—å")
st.pyplot(fig)
st.write("–¶—è –¥—ñ–∞–≥—Ä–∞–º–∞ –ø–æ–∫–∞–∑—É—î, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –≤–ø–µ–≤–Ω–µ–Ω–∞ –º–æ–¥–µ–ª—å —É —Å–≤–æ—ó—Ö –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è—Ö.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 3: –ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏ –ª–æ–≥—ñ—Å—Ç–∏—á–Ω–æ—ó —Ä–µ–≥—Ä–µ—Å—ñ—ó (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –≤–∞–∂–ª–∏–≤–æ—Å—Ç—ñ –æ–∑–Ω–∞–∫)
st.subheader("3. –í–ø–ª–∏–≤ –æ–∑–Ω–∞–∫ —É –ª–æ–≥—ñ—Å—Ç–∏—á–Ω—ñ–π —Ä–µ–≥—Ä–µ—Å—ñ—ó")
feature_importance = pd.Series(model.coef_[0], index=Data.drop(columns=['TARGET_5Yrs']).columns)
fig, ax = plt.subplots()
feature_importance.sort_values().plot(kind='barh', ax=ax)
ax.set_xlabel("–í–ø–ª–∏–≤ –æ–∑–Ω–∞–∫–∏")
ax.set_ylabel("–û–∑–Ω–∞–∫–∏")
st.pyplot(fig)
st.write("–¶—è –¥—ñ–∞–≥—Ä–∞–º–∞ –ø–æ–∫–∞–∑—É—î, —è–∫—ñ –æ–∑–Ω–∞–∫–∏ –º–∞—é—Ç—å –Ω–∞–π–±—ñ–ª—å—à–∏–π –≤–ø–ª–∏–≤ –Ω–∞ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ.")


# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 4: –†–æ–∑–ø–æ–¥—ñ–ª –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å –∑–∞ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –∫–ª–∞—Å–∞–º–∏
st.subheader("4. –†–æ–∑–ø–æ–¥—ñ–ª –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å")
fig, ax = plt.subplots()
sns.boxplot(x=predictions['TARGET_5Yrs'], y=predictions['prediction_score'], ax=ax)
ax.set_xlabel("–†–µ–∞–ª—å–Ω–∏–π –∫–ª–∞—Å")
ax.set_ylabel("–ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑—É")
st.pyplot(fig)
st.write("–¶–µ–π –≥—Ä–∞—Ñ—ñ–∫ –ø–æ–∫–∞–∑—É—î, —è–∫ –º–æ–¥–µ–ª—å –æ—Ü—ñ–Ω—é—î –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –∫–ª–∞—Å—ñ–≤.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 5: –¢–æ—á–Ω—ñ—Å—Ç—å –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å (–∫—Ä—É–≥–æ–≤–∞ –¥—ñ–∞–≥—Ä–∞–º–∞)
st.subheader("5. –¢–æ—á–Ω—ñ—Å—Ç—å –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å")
labels = ["–í—ñ—Ä–Ω—ñ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è", "–ù–µ–≤—ñ—Ä–Ω—ñ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è"]
values = [(predictions['TARGET_5Yrs'] == predictions['prediction_label']).sum(), (predictions['TARGET_5Yrs'] != predictions['prediction_label']).sum()]
fig, ax = plt.subplots()
ax.pie(values, labels=labels, autopct='%1.3f%%', colors=['lightgreen', 'red'])
st.pyplot(fig)
st.write("–¶—è –∫—Ä—É–≥–æ–≤–∞ –¥—ñ–∞–≥—Ä–∞–º–∞ –ø–æ–∫–∞–∑—É—î —á–∞—Å—Ç–∫—É –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö —Ç–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å –º–æ–¥–µ–ª—ñ.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 6: –ì—Ä–∞—Ñ—ñ–∫ –∑–∞–ª–∏—à–∫—ñ–≤
st.subheader("6. –ì—Ä–∞—Ñ—ñ–∫ –∑–∞–ª–∏—à–∫—ñ–≤")
fig, ax = plt.subplots()
sns.scatterplot(x=predictions.index, y=predictions['prediction_score'] - predictions['TARGET_5Yrs'], ax=ax)
ax.set_xlabel("–Ü–Ω–¥–µ–∫—Å –∑–∞–ø–∏—Å—É")
ax.set_ylabel("–ó–∞–ª–∏—à–∫–∏")
st.pyplot(fig)
st.write("–¶–µ–π –≥—Ä–∞—Ñ—ñ–∫ –¥–æ–ø–æ–º–∞–≥–∞—î –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 7: –ì—ñ—Å—Ç–æ–≥—Ä–∞–º–∞ –ø–æ–º–∏–ª–æ–∫
st.subheader("7. –ì—ñ—Å—Ç–æ–≥—Ä–∞–º–∞ –ø–æ–º–∏–ª–æ–∫")
fig, ax = plt.subplots()
sns.histplot(predictions['prediction_score'] - predictions['TARGET_5Yrs'], bins=20, kde=True, ax=ax)
ax.set_xlabel("–†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è–º —ñ —Ä–µ–∞–ª—å–Ω–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º")
st.pyplot(fig)
st.write("–¶—è –≥—ñ—Å—Ç–æ–≥—Ä–∞–º–∞ –ø–æ–∫–∞–∑—É—î —Ä–æ–∑–ø–æ–¥—ñ–ª –ø–æ–º–∏–ª–æ–∫ –º–æ–¥–µ–ª—ñ.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 8: –°–µ—Ä–µ–¥–Ω—ñ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –≥—Ä—É–ø–∞–º–∏
st.subheader("8. –°–µ—Ä–µ–¥–Ω—ñ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è")
fig, ax = plt.subplots()
sns.barplot(x=predictions['TARGET_5Yrs'], y=predictions['prediction_score'], ax=ax)
ax.set_xlabel("–†–µ–∞–ª—å–Ω–∏–π –∫–ª–∞—Å")
ax.set_ylabel("–°–µ—Ä–µ–¥–Ω—î –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è")
st.pyplot(fig)
st.write("–¶–µ–π –≥—Ä–∞—Ñ—ñ–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Å–µ—Ä–µ–¥–Ω—ñ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–ª–∞—Å—É.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 9: –†–æ–∑–ø–æ–¥—ñ–ª –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å –∑–∞ –≥—Ä–∞–≤—Ü—è–º–∏
st.subheader("9. –†–æ–∑–ø–æ–¥—ñ–ª –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å –∑–∞ –≥—Ä–∞–≤—Ü—è–º–∏")
fig, ax = plt.subplots()
sns.boxplot(x=predictions['prediction_label'], y=predictions['PTS'], ax=ax)
ax.set_xlabel("–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–∏–π –∫–ª–∞—Å")
ax.set_ylabel("–û—á–∫–∏ –∑–∞ –≥—Ä—É")
st.pyplot(fig)
st.write("–¶—è –¥—ñ–∞–≥—Ä–∞–º–∞ –ø–æ–∫–∞–∑—É—î, —è–∫ –æ—á–∫–∏ –∑–∞ –≥—Ä—É —Å–ø—ñ–≤–≤—ñ–¥–Ω–æ—Å—è—Ç—å—Å—è –∑ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è–º–∏ –º–æ–¥–µ–ª—ñ.")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è 10: –†–æ–∑–ø–æ–¥—ñ–ª –∑–∞ –∑—ñ–≥—Ä–∞–Ω–∏–º–∏ –º–∞—Ç—á–∞–º–∏
st.subheader("10. –†–æ–∑–ø–æ–¥—ñ–ª –∑–∞ –∑—ñ–≥—Ä–∞–Ω–∏–º–∏ –º–∞—Ç—á–∞–º–∏")
fig, ax = plt.subplots()
sns.boxplot(x=predictions['prediction_label'], y=predictions['GP'], ax=ax)
ax.set_xlabel("–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–∏–π –∫–ª–∞—Å")
ax.set_ylabel("–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑—ñ–≥—Ä–∞–Ω–∏—Ö –º–∞—Ç—á—ñ–≤")
st.pyplot(fig)
st.write("–¶—è –¥—ñ–∞–≥—Ä–∞–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑—ñ–≥—Ä–∞–Ω–∏—Ö –º–∞—Ç—á—ñ–≤ –≤—ñ–¥ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–æ–≥–æ –∫–ª–∞—Å—É.")


